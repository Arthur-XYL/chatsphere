<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatSphere - Chat</title>
    <style>
        body {
            display: none;
        }
    </style>
    <link rel="icon" href="rsc/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="./chat.css">
    <script src="./rsc/DOMPurify.js"></script>
    <script src="./rsc/socket.js"></script>
    <script src="./chat.js" defer></script>
</head>

<body>
    <div class="chat-container">
        <aside class="icon-bar">
            <button class="icon-button" onclick="showChatContacts()"><img src="path_to_chat_icon.png" alt="Chats"></button>
            <button class="icon-button" onclick="showAllContacts()"><img src="path_to_contacts_icon.png" alt="Contacts"></button>
            <!-- ... add more icons here ... -->
            <button class="icon-button logout-button" id="logout-btn"><img src="path_to_logout_icon.png" alt="Logout"></button>
        </aside>

        <!-- Left side: Combined List (Contacts & Friend Requests) -->
        <aside class="contacts">
            <div class="controls">
                <button id="add-contact-btn">Add Contact</button>
                <button id="toggle-list-btn" data-showing="contacts">Friend Requests</button>

                <dialog id="addContactModal">
                    <h3>Add Contact</h3>
                    <input type="text" id="searchInput" placeholder="Search for user...">
                    <button id="add-contact-modal-search">Search</button>
                    <br /><br />
                    <p id="searchResult">Enter a name to search...</p>
                    <button id="add-contact-modal-cancel">Cancel</button>
                    <button id="add-contact-modal-submit">Add</button>
                </dialog>
            </div>

            <!-- Combined List -->
            <div id="combined-list-div">
                <header>
                    <!-- This will change between 'Contacts' and 'Friend Requests' depending on which list is shown -->
                    <h2 id="list-title">Contacts</h2>
                </header>
                
                <ul class="combined-list">
                    <!-- This will be populated dynamically with either contacts or incoming friend requests -->
                </ul>
            </div>
        </aside>

        <!-- Right side: Chat history -->
        <section class="chat">
            <header>
                <h2>John Doe</h2>
            </header>

            <div class="chat-history" id="chat-history">
                <!-- Example chat messages -->
                <div class="message received">Hey! How are you?</div>
                <div class="message sent">I'm good, thanks! How about you?</div>
                <!-- ... add more messages dynamically here ... -->
            </div>

            <footer>
                <input type="text" id="chatInput" placeholder="Type a message...">
                <button id="send-message-btn">Send</button>
            </footer>
        </section>
    </div>
</body>

</html>
